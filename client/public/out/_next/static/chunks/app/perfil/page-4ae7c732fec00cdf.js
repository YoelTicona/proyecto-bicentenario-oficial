(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[921],{1297:(e,t,a)=>{Promise.resolve().then(a.bind(a,7133))},7133:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>m});var s=a(5155),l=a(2115),r=a(6203),i=a(5317),n=a(7283),c=a(6766),o=a(4752),d=a.n(o),u=a(858);function m(){var e;let[t,a]=(0,l.useState)(null),[o,m]=(0,l.useState)(null),[x,p]=(0,l.useState)(!1),[f,h]=(0,l.useState)({}),[b,g]=(0,l.useState)(null),[y,N]=(0,l.useState)(!1);(0,l.useEffect)(()=>{let e=(0,r.xI)(),t=(0,r.hg)(e,async e=>{if(e){a(e);let t=(0,i.H9)(n.db,"Usuarios",e.uid),s=await (0,i.x7)(t);s.exists()&&(m(s.data()),h(s.data()))}});return()=>t()},[]);let j=e=>{let{name:t,value:a}=e.target;h(e=>({...e,[t]:a}))},w=async()=>{try{let e=(0,r.xI)(),s=(0,i.H9)(n.db,"Usuarios",t.uid),l={...f};if(b){N(!0);let i=s(n.IG,"fotos_perfil/".concat(t.uid));await (0,u.D)(i,b);let c=await (0,u.qk)(i);await (0,r.r7)(e.currentUser,{photoURL:c}),l.fotoPerfil=c,a({...e.currentUser,photoURL:c}),N(!1)}await (0,i.mZ)(s,l),m(f),p(!1),d().fire({icon:"success",title:"Perfil actualizado correctamente"})}catch(e){d().fire({icon:"error",title:"Error al actualizar",text:e.message})}};return t&&o?(0,s.jsxs)("div",{className:"max-w-xl mx-auto mt-10 p-6 bg-white rounded-lg shadow py-5",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold mb-4 text-center",children:"Mi perfil"}),(0,s.jsxs)("div",{className:"flex flex-col items-center mb-6",children:[t.photoURL?(0,s.jsx)(c.default,{src:t.photoURL,alt:"Foto",width:80,height:80,className:"rounded-full"}):(0,s.jsx)("div",{className:"w-20 h-20 flex items-center justify-center bg-yellow-400 text-green-900 rounded-full text-2xl font-bold",children:null==(e=o.nombre)?void 0:e.charAt(0)}),x&&(0,s.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{e.target.files[0]&&g(e.target.files[0])},className:"mt-2"}),(0,s.jsxs)("p",{className:"mt-2 font-semibold",children:[o.nombre," ",o.apellidoPaterno]}),(0,s.jsx)("p",{className:"text-gray-600 text-sm",children:t.email}),!x&&(0,s.jsx)("button",{className:"mt-3 text-sm bg-[#889E73] text-white px-4 py-1 rounded-full hover:bg-[#6f825e]",onClick:()=>p(!0),children:"Editar perfil"})]}),(0,s.jsx)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:["nombre","apellidoPaterno","apellidoMaterno","genero","fechaNac","pais","ciudad","rol"].map(e=>(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-gray-500 capitalize",children:e}),x?(0,s.jsx)("input",{type:"text",name:e,value:f[e]||"",onChange:j,className:"w-full border rounded px-2 py-1"}):(0,s.jsx)("p",{className:"font-medium",children:o[e]})]},e))}),x&&(0,s.jsxs)("div",{className:"flex justify-end gap-3 mt-6",children:[(0,s.jsx)("button",{onClick:()=>p(!1),className:"px-4 py-2 rounded bg-gray-300 text-gray-800 hover:bg-gray-400",children:"Cancelar"}),(0,s.jsx)("button",{onClick:w,className:"px-4 py-2 rounded bg-[#889E73] text-white hover:bg-[#6f825e]",disabled:y,children:y?"Subiendo...":"Guardar cambios"})]})]}):(0,s.jsx)("p",{className:"text-center py-20",children:"Cargando perfil..."})}},7283:(e,t,a)=>{"use strict";a.d(t,{IG:()=>o,db:()=>c,yA:()=>n});var s=a(3915),l=a(5317),r=a(6203),i=a(858);let n=(0,s.Wp)({apiKey:"AIzaSyD09OKHFuiLJRkE8EUi3iG3HghecuToDMc",authDomain:"bicentenario-6eeb1.firebaseapp.com",projectId:"bicentenario-6eeb1",storageBucket:"bicentenario-6eeb1.firebasestorage.app",messagingSenderId:"439443900050",appId:"1:439443900050:web:11f71de190fbe19660884b",measurementId:"G-VBQNXJ431R"}),c=(0,l.aU)(n);(0,r.xI)(n);let o=(0,i.c7)(n)}},e=>{var t=t=>e(e.s=t);e.O(0,[992,158,320,288,766,441,684,358],()=>t(1297)),_N_E=e.O()}]);